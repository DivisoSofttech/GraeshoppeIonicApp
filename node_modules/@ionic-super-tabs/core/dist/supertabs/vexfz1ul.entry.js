const t=window.SuperTabs.h;import{b as e,c as i,d as s,e as o}from"./chunk-39d8d03b.js";class n{constructor(){this.scrollableContainer=!1}indexChildren(){this.label=this.el.querySelector("ion-label"),this.icon=this.el.querySelector("ion-icon")}componentWillLoad(){this.indexChildren()}componentDidUpdate(){this.indexChildren()}hostData(){return{role:"button","aria-label":!!this.label&&this.label.innerText,"aria-disabled":!!this.disabled&&"true",class:{"ion-activatable":!0,"ion-focusable":!0,"icon-only":!!this.icon&&!this.label,"label-only":!!this.label&&!this.icon,active:Boolean(this.active),scrollableContainer:this.scrollableContainer}}}render(){return[t("slot",null),t("ion-ripple-effect",{type:"unbounded"})]}static get is(){return"super-tab-button"}static get encapsulation(){return"shadow"}static get properties(){return{active:{type:Boolean,attr:"active",reflectToAttr:!0},disabled:{type:Boolean,attr:"disabled",reflectToAttr:!0},el:{elementRef:!0},icon:{state:!0},index:{type:Number,attr:"index",reflectToAttr:!0},label:{state:!0},scrollableContainer:{type:Boolean,attr:"scrollable-container"}}}static get style(){return":host{-ms-flex:1 0 0px;flex:1 0 0;cursor:pointer;position:relative;max-width:100%;overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;-webkit-touch-callout:none;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:translateZ(0);transform:translateZ(0);opacity:.7;height:72px;padding:12px 16px 20px 16px;--st-icon-size:24px;--st-label-line-height:14px;--st-label-height:14px;--st-label-font-size:14px;--st-label-text-transform:uppercase;--st-label-font-weight:500}::slotted{-ms-flex-negative:1;flex-shrink:1}::slotted(ion-label){color:var(--st-label-color,var(--ion-color-contrast));line-height:var(--st-label-line-height);height:var(--st-label-height);font-size:var(--st-label-font-size);text-transform:var(--st-label-text-transform);font-weight:var(--st-label-font-weight)}::slotted(ion-icon){color:var(--st-icon-color,var(--ion-color-contrast));min-height:var(--st-icon-size);min-width:var(--st-icon-size);font-size:var(--st-icon-size)}:host(.active){opacity:1}:host(.icon-only),:host(.label-only){padding:12px 16px;height:48px;-ms-flex-pack:center;justify-content:center}:host(.scrollableContainer){-ms-flex-positive:0;flex-grow:0;-ms-flex-preferred-size:auto;flex-basis:auto;min-width:90px;max-width:360px}"}}class a{constructor(){this.showIndicator=!0,this.color="primary",this.scrollable=!1,this.scrollablePadding=!0,this.activeTabIndex=0,this.leftThreshold=0,this.rightThreshold=0}componentDidLoad(){this.indexButtons()}componentDidUpdate(){this.indexButtons()}setActiveTab(t){this.activeTabIndex=t,this.alignIndicator(t,!0),this.markButtonActive(this.buttons[t])}setSelectedTab(t){this.alignIndicator(t)}moveContainer(t,i){e(this.buttonsContainerEl,t,0,i?this.config.transitionDuration:0,this.queue)}onWindowResize(){this.alignIndicator(this.activeTabIndex)}onClick(t){let e=t.target;const i=e.tagName.toLowerCase();if("super-tab-button"!==i){if("super-tabs-toolbar"===i)return;e=e.closest("super-tab-button")}this.setActiveTab(e.index),this.buttonClick.emit(e)}async onTouchStart(t){this.queue.read(()=>{const e=i(t);e.x<this.leftThreshold||e.x>this.el.clientWidth-this.rightThreshold?this.shouldCapture=!1:(this.initialCoords=e,this.lastPosX=e.x)})}async onTouchMove(t){this.queue.read(()=>{const e=i(t);if("number"!=typeof this.lastPosX)return;if(!this.isDragging){if("boolean"!=typeof this.shouldCapture&&(this.shouldCapture=s(e,this.initialCoords,this.config)),!0!==this.shouldCapture)return;this.isDragging=!0}const n=this.lastPosX-e.x;if(this.lastPosX=e.x,0===n)return;const a=this.buttonsContainerEl.scrollLeft,r=o(this.buttonsContainerEl,n);r!==a&&this.moveContainer(r,!1)})}async onTouchEnd(){this.isDragging=!1,this.shouldCapture=void 0,this.lastPosX=void 0}indexButtons(){const t=this.el.querySelectorAll("super-tab-button"),e=[];for(let i=0;i<t.length;i++){const s=t[i];s.index=i,s.scrollableContainer=this.scrollable,this.activeTabIndex===i&&this.markButtonActive(s),e.push(s)}this.buttons=e,this.alignIndicator(this.activeTabIndex),"both"!==this.config.sideMenu&&"left"!==this.config.sideMenu||(this.leftThreshold=this.config.sideMenuThreshold),"both"!==this.config.sideMenu&&"right"!==this.config.sideMenu||(this.rightThreshold=this.config.sideMenuThreshold)}markButtonActive(t){this.activeButton&&(this.activeButton.active=!1),t.active=!0,this.activeButton=t}adjustContainerScroll(t){this.queue.read(()=>{let e;const i=this.indicatorPosition,s=this.indicatorWidth,o=this.buttonsContainerEl.clientWidth,n=this.buttonsContainerEl.scrollLeft,a=o/2-s/2;i+s+a>o+n?e=n+(i+s+a-o-n):i-a<n&&(e=i-a,e=(e=Math.max(e,0))>i?i-o+s:e),"number"==typeof e&&this.moveContainer(e,t)})}alignIndicator(t,e=!1){this.showIndicator&&this.queue.read(()=>{const i=t%1,s=this.isDragging=i>0;let o,n;const a=Math.floor(t),r=Math.ceil(t),l=this.buttons[a];if(o=l.offsetLeft,n=l.clientWidth,this.isDragging&&a!==r){const t=this.buttons[r];o+=i*(t.offsetLeft-o),n+=i*(t.clientWidth-n)}this.indicatorPosition=o,this.indicatorWidth=n,this.adjustContainerScroll(e||!s),this.queue.write(()=>{this.showIndicator&&!this.indicatorEl||(this.indicatorEl.style.setProperty("--st-indicator-position-x",this.indicatorPosition+"px"),this.indicatorEl.style.setProperty("--st-indicator-scale-x",String(this.indicatorWidth/100)),this.indicatorEl.style.setProperty("--st-indicator-transition-duration",this.isDragging?"0":`${this.config.transitionDuration}ms`))})})}hostData(){return{class:{["ion-color-"+this.color]:!0}}}render(){return[t("div",{class:"buttons-container",ref:t=>this.buttonsContainerEl=t},t("slot",null),this.showIndicator&&t("super-tab-indicator",{ref:t=>this.indicatorEl=t,toolbarPosition:this.el.assignedSlot.name}))]}static get is(){return"super-tabs-toolbar"}static get encapsulation(){return"shadow"}static get properties(){return{color:{type:String,attr:"color"},config:{type:"Any",attr:"config",mutable:!0},el:{elementRef:!0},moveContainer:{method:!0},queue:{context:"queue"},scrollable:{type:Boolean,attr:"scrollable",reflectToAttr:!0},scrollablePadding:{type:Boolean,attr:"scrollable-padding",reflectToAttr:!0},setActiveTab:{method:!0},setSelectedTab:{method:!0},showIndicator:{type:Boolean,attr:"show-indicator"}}}static get events(){return[{name:"buttonClick",method:"buttonClick",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"window:resize",method:"onWindowResize",passive:!0},{name:"click",method:"onClick"},{name:"touchstart",method:"onTouchStart",passive:!0},{name:"touchmove",method:"onTouchMove",passive:!0},{name:"touchend",method:"onTouchEnd",passive:!0}]}static get style(){return":host{-ms-flex:0 1 auto;flex:0 1 auto;display:block;position:relative;z-index:2;background:var(--super-tabs-toolbar-background,var(--ion-color-base));overflow:visible}:host,:host .buttons-container{width:100%;-webkit-transform:translateZ(0);transform:translateZ(0)}:host .buttons-container{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;overflow:hidden}:host(:not([no-border])):after{left:0;bottom:-8px;background-position:left 0 top 0;position:absolute;width:100%;height:8px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAIBAMAAAACWGKkAAAAFVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAASAQCkAAAAB3RSTlMFTEIzJBcOYhQUIwAAAB9JREFUCNdjEIQCBiUoYDCGAgYXKGAIhQKGNChgwAAAorMLKSCkL40AAAAASUVORK5CYII=);background-repeat:repeat-x;content:\"\";z-index:3;-webkit-transform:translateZ(0);transform:translateZ(0)}:host([scrollable]) .buttons-container{will-change:scroll-position}:host([scrollable][scrollable-padding]) .buttons-container{padding-left:var(--st-scrollable-toolbar-padding-left,52px);width:calc(100% - var(--st-scrollable-toolbar-padding-left, 52px))}"}}export{n as SuperTabButton,a as SuperTabsToolbar};