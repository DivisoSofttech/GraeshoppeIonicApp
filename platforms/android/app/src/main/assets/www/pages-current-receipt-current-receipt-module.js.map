{"version":3,"sources":["webpack:///./src/app/pages/current-receipt/current-receipt.module.ts","webpack:///./src/app/pages/current-receipt/current-receipt.page.html","webpack:///./src/app/pages/current-receipt/current-receipt.page.scss","webpack:///./src/app/pages/current-receipt/current-receipt.page.ts"],"names":[],"mappings":"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","file":"pages-current-receipt-current-receipt-module.js","sourcesContent":["import { ProductQuantityModalComponent } from './../../components/product-quantity-modal/product-quantity-modal.component';\r\nimport { ComponentsModule } from './../../components/components.module';\r\nimport { MakePaymentPage } from './../make-payment/make-payment.page';\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CurrentReceiptPage } from './current-receipt.page';\r\nimport { MakePaymentPageModule } from '../make-payment/make-payment.module';\r\nimport { CustomersPageModule } from '../customers/customers.module';\r\nimport { CustomersPage } from '../customers/customers.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CurrentReceiptPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MakePaymentPageModule,\r\n    ComponentsModule,\r\n    // CustomersPageModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [CurrentReceiptPage],\r\n  entryComponents: [MakePaymentPage , ProductQuantityModalComponent]\r\n})\r\nexport class CurrentReceiptPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons>\\r\\n      <ion-back-button></ion-back-button>    \\r\\n      <ion-title>Basket</ion-title>\\r\\n    </ion-buttons>\\r\\n    \\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content *ngIf=\\\"ticketLines.length > 0\\\" >\\r\\n  <ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button color=\\\"danger\\\" (click)=\\\"setCustomer()\\\" >\\r\\n      <ion-icon name=\\\"person\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n  <ion-grid class=\\\"bg-grey\\\">\\r\\n    <ion-row justify-content-center class=\\\"ion-margin-top\\\">\\r\\n      <ion-col size=\\\"8\\\" text-center>\\r\\n        <ion-label>\\r\\n          Order total\\r\\n        </ion-label>\\r\\n        <ion-text cl>{{'(' +ticketLines.length +' items)'}}</ion-text>\\r\\n\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row justify-content-center>\\r\\n      <ion-col size=\\\"12\\\" text-center>\\r\\n          <p class=\\\"price\\\">&#x20b9;{{total}}</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\">\\r\\n        <ion-button color=\\\"danger\\\" expand=\\\"full\\\" (click)=\\\"checkout()\\\">Go To Checkout</ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n\\r\\n  <ion-grid margin>\\r\\n\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"8\\\" text-left>\\r\\n          <ion-label class=\\\"bold\\\">Order summary</ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"4\\\" text-right>\\r\\n          <ion-label class=\\\"bold\\\">Total</ion-label>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n      <ion-row *ngFor=\\\"let ticket of ticketLines\\\" class=\\\"border-top ion-margin-vertical ion-padding-vertical\\\"\\r\\n      (click)=\\\"productQuantity()\\\">\\r\\n          <ion-col size=\\\"6\\\" text-left>\\r\\n            <ion-label *ngIf=\\\"products.length > 0\\\">{{getProduct(ticket).name}}</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"2\\\">\\r\\n            <ion-label *ngIf=\\\"products.length > 0\\\">{{'x' +ticket.quantity}}</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"2\\\" text-right>\\r\\n            <ion-label>&#x20b9;{{ticket.total}}</ion-label>\\r\\n          </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n         <ion-row class=\\\"border-top ion-padding-vertical\\\">\\r\\n          <ion-col size=\\\"8\\\" text-left>\\r\\n            <ion-label class=\\\"bold\\\">Total</ion-label>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"4\\\" text-right>\\r\\n            <ion-label class=\\\"bold\\\">\\r\\n                &#x20b9;{{total}}\\r\\n            </ion-label>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n\\r\\n        <!-- <ion-row>\\r\\n          <ion-col>\\r\\n              <ion-label>\\r\\n                  <address>Bridgewater Hall Summer Hill,Dublin, DUBLIN 1</address>\\r\\n                </ion-label>\\r\\n          </ion-col>\\r\\n        </ion-row> -->\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n<ion-content *ngIf=\\\"ticketLines.length === 0\\\" >\\r\\n  <ion-grid class=\\\"bg-grey\\\">\\r\\n    <ion-row justify-content-center class=\\\"ion-margin-top\\\">\\r\\n      <ion-col size=\\\"8\\\" text-center>\\r\\n        <ion-label>\\r\\n          Order total\\r\\n        </ion-label>\\r\\n        <ion-text cl>(0 items)</ion-text>\\r\\n\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row justify-content-center>\\r\\n      <ion-col size=\\\"12\\\" text-center>\\r\\n          <p class=\\\"price\\\">&#x20b9;0</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-card>\\r\\n          <ion-card-content>\\r\\n            <ion-icon class=\\\"cart\\\" name=\\\"cart\\\"></ion-icon>\\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\"","module.exports = \".bg-grey {\\n  background: #eae4e4; }\\n\\n.cl-grey {\\n  color: grey; }\\n\\n.bold {\\n  color: black;\\n  font-weight: bold; }\\n\\n.price {\\n  font-size: 41px;\\n  margin: 3px;\\n  color: darkslategrey; }\\n\\n.info-icon {\\n  font-size: 50px;\\n  margin-right: 5px; }\\n\\n.border-top {\\n  border-top: 1px solid grey; }\\n\\n.line-height-medium {\\n  line-height: 22px; }\\n\\naddress {\\n  font-weight: bold;\\n  font-size: 13px; }\\n\\n.cart {\\n  font-size: 275px;\\n  opacity: .35; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY3VycmVudC1yZWNlaXB0L2Y6XFxQcm9qZWN0c1xcR3JhZXNob3BwZUlvbmljQXBwL3NyY1xcYXBwXFxwYWdlc1xcY3VycmVudC1yZWNlaXB0XFxjdXJyZW50LXJlY2VpcHQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksbUJBQW1CLEVBQUE7O0FBR3ZCO0VBQ0ksV0FBVyxFQUFBOztBQUdmO0VBRUksWUFBWTtFQUNaLGlCQUFpQixFQUFBOztBQUdyQjtFQUNJLGVBQWU7RUFDZixXQUFXO0VBQ1gsb0JBQW9CLEVBQUE7O0FBR3hCO0VBQ0ksZUFBZTtFQUNmLGlCQUFpQixFQUFBOztBQUdyQjtFQUVJLDBCQUEwQixFQUFBOztBQUc5QjtFQUVJLGlCQUFpQixFQUFBOztBQUdyQjtFQUNJLGlCQUFpQjtFQUNqQixlQUFlLEVBQUE7O0FBR25CO0VBQ0ksZ0JBQWdCO0VBQ2hCLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2N1cnJlbnQtcmVjZWlwdC9jdXJyZW50LXJlY2VpcHQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJnLWdyZXkge1xyXG4gICAgXHJcbiAgICBiYWNrZ3JvdW5kOiAjZWFlNGU0O1xyXG59XHJcblxyXG4uY2wtZ3JleSB7XHJcbiAgICBjb2xvcjogZ3JleTtcclxufVxyXG5cclxuLmJvbGQge1xyXG5cclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG4ucHJpY2Uge1xyXG4gICAgZm9udC1zaXplOiA0MXB4O1xyXG4gICAgbWFyZ2luOiAzcHg7XHJcbiAgICBjb2xvcjogZGFya3NsYXRlZ3JleTtcclxufVxyXG5cclxuLmluZm8taWNvbiB7XHJcbiAgICBmb250LXNpemU6IDUwcHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxufVxyXG5cclxuLmJvcmRlci10b3B7XHJcblxyXG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIGdyZXk7XHJcbn1cclxuXHJcbi5saW5lLWhlaWdodC1tZWRpdW0ge1xyXG5cclxuICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xyXG59XHJcblxyXG5hZGRyZXNzIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxM3B4O1xyXG59XHJcblxyXG4uY2FydCB7XHJcbiAgICBmb250LXNpemU6IDI3NXB4O1xyXG4gICAgb3BhY2l0eTogLjM1O1xyXG59Il19 */\"","import { CustomersPage } from './../customers/customers.page';\r\nimport { CustomerDTO } from './../../api/models/customer-dto';\r\nimport { QueryResourceService } from 'src/app/api/services';\r\nimport { CartService } from './../../services/cart.service';\r\nimport { TicketLineDTO } from './../../api/models/ticket-line-dto';\r\nimport { ProductQuantityModalComponent } from './../../components/product-quantity-modal/product-quantity-modal.component';\r\nimport { MakePaymentPage } from './../make-payment/make-payment.page';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ProductDTO } from 'src/app/api/models';\r\n\r\n@Component({\r\n  selector: 'app-current-receipt',\r\n  templateUrl: './current-receipt.page.html',\r\n  styleUrls: ['./current-receipt.page.scss']\r\n})\r\nexport class CurrentReceiptPage implements OnInit {\r\n  ticketLines: TicketLineDTO[] = [];\r\n  products: ProductDTO[] = [];\r\n  customer: CustomerDTO;\r\n  total = 0;\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private cartService: CartService,\r\n    private queryResourceService: QueryResourceService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.ticketLines = this.cartService.ticketLines;\r\n    this.ticketLines.forEach(ticket => {\r\n      this.total += ticket.total;\r\n      this.queryResourceService\r\n        .findProductUsingGET(ticket.productId)\r\n        .subscribe(result => {\r\n          this.products.push(result);\r\n          console.log(result);\r\n        });\r\n    });\r\n  }\r\n\r\n  async checkout() {\r\n    const modal = await this.modalController.create({\r\n      component: MakePaymentPage,\r\n      componentProps: { ticketLines: this.ticketLines, toBePaid: this.total, customerId: this.customer.id }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  async productQuantity() {\r\n    const modal = await this.modalController.create({\r\n      component: ProductQuantityModalComponent\r\n    });\r\n\r\n    return await modal.present();\r\n  }\r\n\r\n  getProduct(ticket: TicketLineDTO): ProductDTO {\r\n    return this.products[this.ticketLines.indexOf(ticket)];\r\n  }\r\n\r\n  async setCustomer() {\r\n    const modal = await this.modalController.create({\r\n      component: CustomersPage,\r\n      componentProps: {asModal: true}\r\n    });\r\n    await modal.present();\r\n    const { data } = await modal.onDidDismiss();\r\n    this.customer = data.selectedCustomer;\r\n    console.log(this.customer)\r\n  }\r\n}\r\n"],"sourceRoot":""}